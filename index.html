<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0">
  <title>CSV Column Display with Count and Percentage (Average)</title>
  <link rel="stylesheet" href="style/weeklygoals.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>


  <!-- Auth/UI -->
  <button id="signout_button" style="display:none; margin-left:12px; font-size:1.1em;">Sign out</button>
  <div id="user-info"></div>
  <h1>Weekly Goals</h1>
  <div class="download-info" id="csvDate"></div>
  <button id="authorize_button" style="margin:18px 0 8px 0; font-size:1.1em;">Sign in to View Google Sheet</button>
  <button id="refresh_button" style="display:none;">Refresh Data</button>

  <!-- Toast -->
  <div id="toast" style="visibility:hidden; min-width:180px; background-color:#333; color:#fff; text-align:center; border-radius:8px; padding:14px; position:fixed; z-index:9999; left:50%; bottom:30px; font-size:17px; transform:translateX(-50%); transition:visibility 0s, opacity 0.5s linear; opacity:0;">
    Refreshed!
  </div>

  <!-- Optional upload (hidden) -->
  <div style="display:none;">
    <div id="dropZone">
      <p>Drag and drop your CSV file here or</p>
      <label for="csvFileInput" style="color:#0044cc; cursor:pointer; text-decoration:underline;">click</label>
      to upload.
      <input type="file" id="csvFileInput" style="display:none;" accept=".csv" />
    </div>
  </div>

  <!-- Data table container -->
  <div id="table-container">
    <!-- Ensure the table exists for JS -->
    <table id="data-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Loading bar -->
  <div class="loading-bar-overlay" id="loadingBarOverlay" style="display:none;">
    <div class="loading-bar-container" id="loadingBarContainer">
      <div class="loading-bar" id="loadingBar"></div>
    </div>
  </div>



  <!-- Luxon (if you use it elsewhere) -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>

  <!-- Your main JS (exports gapiLoaded/gisLoaded) -->
  <script src="database.js"></script>

  <!-- Load each Google script ONCE, and only at the end -->
  <script src="https://apis.google.com/js/api.js" onload="gapiLoaded()" async defer></script>
  <script src="https://accounts.google.com/gsi/client" onload="gisLoaded()" async defer></script>
</body>
</html>
