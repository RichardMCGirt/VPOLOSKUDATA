<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Product Portal â€” Select Items, Add Labor</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
</head>
<body>

  <!-- Cart button (fixed, top-right) -->
  <button id="cartFab" class="cart-fab" aria-label="Open cart">
    <span class="cart-emoji" aria-hidden="true">ðŸ›’</span>
    <span id="cartCountBadge" class="badge">0</span>
  </button>

  <!-- Auth/UI -->
  <div class="auth-row">
    <button id="authorize_button" class="btn primary">Sign in to View SKU Database</button>
    <button id="signout_button" class="btn" style="display:none;">Sign out</button>
  </div>

  <h1>Product &amp; VPO Calculator</h1>

  <!-- Controls -->
  <div id="controls" class="card">
    <input id="searchInput" type="search" placeholder="Search by SKU or Descriptionâ€¦" aria-label="Search by SKU or description" disabled />
    <select id="vendorFilter" aria-label="Filter by vendor" disabled>
      <option value="">All vendors</option>
    </select>
    <select id="categoryFilter" aria-label="Filter by category" disabled>
      <option value="">All categories</option>
    </select>
    <button id="clearFilters" class="btn" disabled>Clear</button>
  

<!-- Data load status + refresh -->
    <div class="status-row" id="dataStatusRow" aria-live="polite" aria-atomic="true">
      <span id="dataStatus" class="status-pill" data-state="idle">Not loaded</span>
      <button id="refreshData" class="btn" type="button">Refresh</button>
    </div>

</div>

  <!-- Category chips (mobile-friendly quick filter) -->
  <div id="categoryChips" class="chips scroller hidden" aria-label="Quick category filters"></div>

  <!-- Data table container -->
  <div id="table-container" class="card" style="display:none;">
    <table id="data-table">
      <thead></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Cart / Selection -->
  <section id="cart-section" class="card hidden">
    <header>
      <strong>Selected Items</strong>
      <div class="row-gap">
        <button id="clearCart" class="btn danger">Clear All</button>
      </div>
    </header>

    <table id="cart-table">
      <thead>
        <tr>
          <th>Vendor</th>
          <th>SKU</th>
          <th>Description</th>
          <th>Qty</th>
          <th>Unit (Sell +30%)</th>
          <th>Line Total</th>
          <th></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Labor -->
    <div id="labor-list">
      <div class="labor-head">
        <strong>Labor</strong>
        <div>
          <button id="addLabor" class="btn">+ Add Labor Line</button>
        </div>
      </div>
      <!-- labor rows inserted here -->
    </div>

    <!-- Totals -->
    <div id="totals">
      <div class="label">Products Total:</div><div class="value" id="productTotal">$0.00</div>
      <div class="label">Labor Total:</div>   <div class="value" id="laborTotal">$0.00</div>
      <div class="label grand">Grand Total:</div><div class="value grand" id="grandTotal">$0.00</div>
    </div>
  </section>

  <!-- Toast -->
  <div id="toast" role="status" aria-live="polite">Done</div>

  <!-- Loading bar -->
  <div class="loading-bar-overlay" id="loadingBarOverlay" style="display:none;">
    <div class="loading-bar-container" id="loadingBarContainer">
      <div class="loading-bar" id="loadingBar"></div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
<script src="database.fixed2.js"></script>
<script src="https://apis.google.com/js/api.js" onload="gapiLoaded()" async defer></script>
<script src="https://accounts.google.com/gsi/client" onload="gisLoaded()" async defer></script>
</body>
</html>
